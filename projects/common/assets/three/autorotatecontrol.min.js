THREE.AutoRotateControl=function(t,e){var o=this;this.camera=t,this.domElement=e,this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateX=0,this.rotateY=0,this.rotateSpeed=1,this.zoomSpeed=1.2,this.zoomFactor=1,this.enableRotate=!0,this.enableZoom=!0,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.target=new THREE.Vector3;var a=new THREE.Vector3,n=new THREE.Vector3,i=new THREE.Vector2,r=new THREE.Vector2,s={type:"change"};function c(t){o.enabled&&o.enableZoom&&(t.preventDefault(),t.stopPropagation(),i.y-=.01*t.deltaY)}function m(t){o.enabled&&t.preventDefault()}this.handleResize=function(){var t=this.domElement.getBoundingClientRect(),e=this.domElement.ownerDocument.documentElement;this.screen.left=t.left+window.pageXOffset-e.clientLeft,this.screen.top=t.top+window.pageYOffset-e.clientTop,this.screen.width=t.width,this.screen.height=t.height},this.rotateCamera=function(){var t=new THREE.Vector3;t.set(o.rotateX,o.rotateY,0);var e=t.length();n.copy(o.camera.position).sub(o.target);var a=new THREE.Vector3;a.copy(n).normalize();var i=new THREE.Vector3;i.copy(o.camera.up).normalize();var r=new THREE.Vector3;r.crossVectors(i,a).normalize(),i.setLength(o.rotateY),r.setLength(o.rotateX),t.copy(i.add(r));var s=new THREE.Vector3;s.crossVectors(t,n).normalize(),e*=o.rotateSpeed;var c=new THREE.Quaternion;c.setFromAxisAngle(s,e),n.applyQuaternion(c),o.camera.up.applyQuaternion(c)},this.zoomCamera=function(){var t=1+(r.y-i.y)*o.zoomSpeed;1!==t&&t>0&&n.multiplyScalar(t),i.y+=(r.y-i.y)*this.dynamicDampingFactor},this.autoZoomCamera=function(){1!==this.zoomFactor&&this.zoomFactor>0&&n.multiplyScalar(this.zoomFactor)},this.checkDistances=function(){o.enableZoom&&(n.lengthSq()>o.maxDistance*o.maxDistance&&(o.camera.position.addVectors(o.target,n.setLength(o.maxDistance)),i.copy(r)),n.lengthSq()<o.minDistance*o.minDistance&&(o.camera.position.addVectors(o.target,n.setLength(o.minDistance)),i.copy(r)))},this.update=function(){n.subVectors(o.camera.position,o.target),o.enableRotate&&o.rotateCamera(),o.enableZoom&&o.zoomCamera(),o.autoZoomCamera(),o.camera.position.addVectors(o.target,n),o.checkDistances(),o.camera.lookAt(o.target),a.distanceToSquared(o.camera.position)>1e-6&&(o.dispatchEvent(s),a.copy(o.camera.position))},this.dispose=function(){this.domElement.removeEventListener("contextmenu",m,!1),this.domElement.removeEventListener("wheel",c,!1)},this.domElement.addEventListener("contextmenu",m,!1),this.domElement.addEventListener("wheel",c,!1),this.handleResize(),this.update()},THREE.AutoRotateControl.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.AutoRotateControl.prototype.constructor=THREE.AutoRotateControl;